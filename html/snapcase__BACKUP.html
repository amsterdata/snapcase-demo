<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Snapcase Demo Layout</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
    <style>
        .nav-pills > li > a {
            color: #dee2e6 !important;
        }

        .nav-pills > li > a.active {
            background-color: #dc3545 !important;
        }
    </style>
    <script src="static.js"></script>
    <script src="app.js"></script>
    <script src="rendering.js"></script>
</head>
<body style="background-color: #495057;">


<div class="modal fade" id="purchaseModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Database Updates</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Deleted 9 tuples from the purchase database within 60ms via the following query:</p>
                <pre>
DELETE FROM order_products
 WHERE product_id = 33065
   AND order_id IN (835224, 3185498, 664965,
       2068547, 2122901, 943346);
                </pre>
                <p>These changes were propagated to Differential Dataflow to incrementally update the recommendation model.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-target="#modelModal" data-bs-toggle="modal">Ok, show me the model changes next</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modelModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Model Maintenance</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h6>Sparse user embedding</h6>
                <ul>
                    <li>Update of the user embedding took 824 ms</li>
                    <li>Embedding changes: (Prosecco, -0.0759)</li>
                </ul>

                <h6>Top-k neighborhood graph</h6>
                <ul>
                    <li>Update of the top-k index took 795 ms</li>
                    <li>Maintenance of the top-k index involved inspection of the entries for 92,324 users and updates for the entries of 121 users</li>
                    <li>78 edge weight updates, 12 edge insertions and 41 edge deletions</li>
                    <li>TODO details on demand</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-target="#recommendationModal" data-bs-toggle="modal">Ok, show me the recommendation changes</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="recommendationModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Recommendation Maintenance</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>
                    <h6>Dropped from Recommendations</h6>
                    <ul class="list-group">
                        <li class="list-group-item text-danger">
                            <img src="images/aisles/62.png" style="width: 25px; height: 25px;"/> Brut Sparkling Wine
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1"/>
                            </svg>
                            -0.1619
                        </li>
                        <li class="list-group-item text-danger">
                            <img src="images/aisles/62.png" style="width: 25px; height: 25px;"/> 80 Vodka Holiday Edition
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1"/>
                            </svg>
                            -0.1842
                        </li>
                        <li class="list-group-item text-danger">
                            <img src="images/aisles/62.png" style="width: 25px; height: 25px;"/> Chardonnay Wine
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1"/>
                            </svg>
                            -0.3305
                        </li>
                    </ul>
                </p>
                <p>
                <h6>New in Recommendations</h6>
                    <ul class="list-group">
                        <li class="list-group-item">
                            <img src="images/aisles/12.png" style="width: 25px; height: 25px;"/> Penne Pasta
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5"/>
                            </svg> +0.2015
                        </li>
                        <li class="list-group-item">
                            <img src="images/aisles/84.png" style="width: 25px; height: 25px;"/> Fat Free Milk
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5"/>
                            </svg> +0.2981
                        </li>
                        <li class="list-group-item text-danger">
                            <img src="images/aisles/62.png" style="width: 25px; height: 25px;"/> Sonoma Chardonnay
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5"/>
                            </svg> +0.1510
                        </li>
                    </ul>
                </p>
                <p>
                <h6>Updates in Recommendations</h6>
                <ul class="list-group">
                    <li class="list-group-item">
                        <img src="images/aisles/83.png" style="width: 25px; height: 25px;"/> White Sliced Mushrooms
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5"/>
                        </svg> +0.2075
                    </li>
                    <li class="list-group-item">
                        <img src="images/aisles/36.png" style="width: 25px; height: 25px;"/> Butter
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5"/>
                        </svg> +0.1219
                    </li>
                    <li class="list-group-item">
                        <img src="images/aisles/115.png" style="width: 25px; height: 25px;"/> Grapefruit Sparkling Water
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1"/>
                        </svg> -0.0138
                    </li>
                </ul>
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary"  data-bs-target="#influenceModal" data-bs-toggle="modal">Ok, show me the influence changes</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="influenceModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Recommendation Maintenance</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>
                    TBD
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal">Done</button>
            </div>
        </div>
    </div>
</div>


<div class="container">
        <div class="row align-items-start justify-content-start py-3">
            <div class="col-3">
                <h2>Unlearning Scenarios</h2>
            </div>
            <div class="col-9">
                <ul class="nav nav-pills danger" role="tablist">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="pills-sober-tab" data-bs-toggle="pill" data-bs-target="#pills-sober" type="button" role="tab" aria-controls="pills-sober" aria-selected="true">Getting sober</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="pills-veg-tab" data-bs-toggle="pill" data-bs-target="#pills-veg" type="button" role="tab" aria-controls="pills-veg" aria-selected="true">Going vegetarian</a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="pills-healthy-tab" data-bs-toggle="pill" data-bs-target="#pills-healthy" type="button" role="tab" aria-controls="pills-healthy" aria-selected="true">Eating more healthy</a>
                    </li>
                </ul>
            </div>
        </div>


    <div class="row align-items-start justify-content-start">
        <div class="col-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Relational Purchase Database</h5>
                    <h6 class="card-subtitle mb-2 text-body-secondary" id="renderPurchasesStats">
                        <!-- Purchase stats will be rendered here-->
                    </h6>
                    <p class="card-text" id="renderPurchases">
                        <!-- Purchases will be rendered here-->
                    </p>
                </div>
            </div>
        </div>
        <div class="col-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Recommendation Model as Materialised View</h5>
                    <h6 class="card-subtitle mb-2 text-body-secondary">TBD</h6>
                    <p class="card-text">

                    <div class="card-body">
                        <h5 class="card-title">Sparse User Embedding</h5>
                        <p class="card-text">

                            <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#sparseUserEmbedding" aria-expanded="false" aria-controls="sparseUserEmbedding">
                                Show details (8 items and weights)
                            </button>

                            <ul class="list-group collapse" id="sparseUserEmbedding">
                                <li class="list-group-item">
                                    Elbow Macaroni Pasta
                                    <span class="badge text-bg-light rounded-pill">0.098</span>
                                </li>
                                <li class="list-group-item">
                                    Roasted Garlic Herb Italian Sauce
                                    <span class="badge text-bg-light rounded-pill">0.098</span>
                                </li>
                                <li class="list-group-item text-danger">
                                    Cabernet Sauvignon
                                    <span class="badge text-bg-danger rounded-pill">0.590</span>
                                </li>
                                <li class="list-group-item">
                                    White Sliced Mushrooms
                                    <span class="badge text-bg-light rounded-pill">0.098</span>
                                </li>
                                <li class="list-group-item">
                                    Butter
                                    <span class="badge text-bg-light rounded-pill">0.098</span>
                                </li>
                                <li class="list-group-item">
                                    Baby Bella Mushrooms
                                    <span class="badge text-bg-light rounded-pill">0.098</span>
                                </li>
                                <li class="list-group-item">
                                    Spaghetti Pasta
                                    <span class="badge text-bg-light rounded-pill">0.098</span>
                                </li>
                                <li class="list-group-item">
                                    Chicken Wings Family Pack
                                    <span class="badge text-bg-light rounded-pill">0.098</span>
                                </li>
                            </ul>
                        </p>
                    </div>

                    <div class="card-body">
                        <h5 class="card-title">Ego Network in the Top-k Neighbors Graph</h5>
                        <h6 class="card-subtitle mb-2 text-body-secondary">TBD</h6>
                        <p class="card-text">
                        <div id="cy" style="width: 100%; height: 500px;">

                        </div>
                        </p>
                    </div>

                    <div class="card-body">
                        <h5 class="card-title">Product Category Distribution with Influenced Users</h5>
                        <h6 class="card-subtitle mb-2 text-body-secondary">This user influences the recommendations of 69 other users.</h6>
                        <p class="card-text">
                        <ul class="list-group">
                            <li class="list-group-item text-danger">
                                <img src="images/aisles/62.png" style="width: 25px; height: 25px;"/> White wines
                                <span class="badge text-bg-danger rounded-pill">5.02%</span>
                            </li>
                            <li class="list-group-item">
                                <img src="images/aisles/83.png" style="width: 25px; height: 25px;"/> Fresh vegetables
                                <span class="badge text-bg-light rounded-pill">3.26%</span>
                            </li>
                            <li class="list-group-item text-danger">
                                <img src="images/aisles/28.png" style="width: 25px; height: 25px;"/> Red wines
                                <span class="badge text-bg-danger rounded-pill">1.65%</span>
                            </li>
                            <li class="list-group-item">
                                <img src="images/aisles/9.png" style="width: 25px; height: 25px;"/> Pasta sauce
                                <span class="badge text-bg-light rounded-pill">0.73%</span>
                            </li>
                            <li class="list-group-item">
                                <img src="images/aisles/21.png" style="width: 25px; height: 25px;"/> Packaged cheese
                                <span class="badge text-bg-light rounded-pill">0.33%</span>
                            </li>
                        </ul>
                        </p>
                    </div>


                    </p>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Next-Basket Recommendations</h5>
                    <h6 class="card-subtitle mb-2 text-body-secondary" id="renderRecommendationStats"><!-- Recommendation stats are rendered here --></h6>
                    <p class="card-text">
                        <ul class="list-group" id="renderRecommendations">
                            <!-- Recommendations are rendered here -->
                        </ul>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
    var cy = cytoscape({

      container: document.getElementById('cy'), // container to render in

      elements: [],

      style: [ // the stylesheet for the graph
        {
          selector: 'node',
          style: {
            'background-color': 'data(color)',
            'label': 'data(id)',
          }
        },

        {
          selector: 'edge',
          style: {
            'width': 3,
            'line-color': 'data(color)',
            'target-arrow-color': 'data(color)',
            'target-arrow-shape': 'triangle',
            'curve-style': 'bezier'
          }
        }
      ]

    });

    cy.on('tap', 'node', function(evt){
      var node = evt.target;
      alert(node.id());
    });

    const vertices = [
        188716, 193469, 56733, 200847, 98036, 16176, 113986, 110510, 140678, 169518, 96514, 74561, 61100, 129213,
        163653, 176285, 185608, 199761, 202317, 98492, 165161, 81666, 196690, 131765, 109430, 40628, 7432, 59229,
        58705, 194823, 118768, 198517, 178769, 32408, 37130, 72502, 156513, 176225, 111623, 163877, 11776, 43067,
        186745, 58732, 32672, 74483, 73281, 6980, 100575, 35939, 151833, 191320, 148177, 162318, 126560, 121447,
        122771, 204541, 6371, 171628, 16301, 113109, 119629, 57352, 4240, 93117, 93210, 103531, 43783, 43346,
        146990, 95981, 165493, 95502, 167049, 3096, 117390, 173561, 116027, 31728, 40554, 45690, 4666, 13457,
        76124, 164827, 39735, 166193, 177445, 186319, 67339, 77603, 128001, 136234, 168893, 179213, 108326,
        88205, 64649, 106588, 120477, 183849, 34882
    ];

    const edges = [
        [188716, 136234], [188716, 93210], [188716, 168893], [188716, 61100], [193469, 93210], [56733, 119629],
        [56733, 3096], [56733, 61100], [56733, 93210], [56733, 118768], [56733, 199761], [56733, 6371], [56733, 98036],
        [56733, 136234], [56733, 110510], [200847, 136234], [200847, 110510], [200847, 119629], [200847, 199761],
        [200847, 93210], [200847, 118768], [200847, 61100], [200847, 74483], [200847, 39735], [200847, 6371],
        [200847, 3096], [200847, 98036], [98036, 93210], [98036, 3096], [98036, 118768], [98036, 61100],
        [98036, 168893], [98036, 6371], [98036, 13457], [98036, 32672], [98036, 199761], [98036, 110510],
        [16176, 188716], [16176, 43067], [16176, 98036], [16176, 32672], [16176, 93210], [16176, 6371],
        [113986, 93210], [113986, 118768], [110510, 119629], [110510, 118768], [110510, 3096], [110510, 93210],
        [110510, 61100], [110510, 199761], [110510, 6371], [110510, 98036], [110510, 32672], [140678, 93210],
        [140678, 126560], [140678, 173561], [169518, 93210], [96514, 39735], [96514, 93210], [74561, 118768],
        [74561, 93210], [61100, 3096], [61100, 93210], [61100, 110510], [61100, 13457], [61100, 168893],
        [61100, 118768], [61100, 6371], [61100, 98036], [61100, 199761], [129213, 98036], [129213, 61100],
        [129213, 32672], [129213, 93210], [129213, 6371], [129213, 118768], [129213, 199761], [163653, 93210],
        [163653, 32672], [163653, 116027], [176285, 6980], [176285, 93210], [176285, 72502], [185608, 126560],
        [185608, 93210], [199761, 136234], [199761, 119629], [199761, 118768], [199761, 98036], [199761, 61100],
        [199761, 93210], [199761, 4240], [199761, 110510], [199761, 3096], [199761, 6371], [202317, 61100],
        [202317, 93210], [202317, 110510], [202317, 6371], [202317, 32672], [202317, 98036], [202317, 118768],
        [202317, 3096], [202317, 199761], [98492, 93210], [98492, 191320], [165161, 93210], [81666, 74483],
        [81666, 93210], [196690, 93210], [131765, 93210], [131765, 118768], [131765, 3096], [131765, 98036],
        [131765, 61100], [131765, 110510], [131765, 43067], [131765, 199761], [131765, 6371], [109430, 191320],
        [109430, 16301], [109430, 93210], [40628, 93210], [7432, 93210], [7432, 179213], [59229, 93210],
        [59229, 6371], [59229, 168893], [59229, 98036], [59229, 61100], [59229, 118768], [59229, 43067],
        [59229, 167049], [59229, 199761], [59229, 110510], [58705, 93210], [194823, 93210], [194823, 64649],
        [194823, 193469], [118768, 93210], [118768, 61100], [118768, 6371], [118768, 199761], [118768, 98036],
        [118768, 32672], [118768, 110510], [198517, 93210], [198517, 118768], [198517, 32672], [198517, 103531],
        [178769, 199761], [178769, 6371], [178769, 93210], [178769, 168893], [178769, 98036], [32408, 93210],
        [37130, 93210], [72502, 176285], [72502, 93210], [156513, 93210], [176225, 39735], [176225, 93210],
        [111623, 93210], [163877, 93210], [163877, 118768], [11776, 93210], [43067, 93210], [43067, 199761],
        [43067, 3096], [43067, 4240], [43067, 131765], [43067, 118768], [43067, 61100], [43067, 6371],
        [43067, 59229], [43067, 110510], [43067, 98036], [186745, 93210], [186745, 118768], [58732, 110510],
        [58732, 93210], [32672, 202317], [32672, 118768], [32672, 110510], [32672, 98036], [32672, 93210],
        [74483, 93210], [73281, 93210], [6980, 93210], [100575, 93210], [35939, 93210], [35939, 118768],
        [35939, 136234], [35939, 34882], [35939, 3096], [151833, 16301], [151833, 93210], [151833, 93117],
        [191320, 98492], [191320, 93210], [148177, 110510], [148177, 103531], [148177, 6371], [148177, 93210],
        [162318, 93210], [126560, 93210], [126560, 39735], [121447, 93210], [121447, 199761], [122771, 93210],
        [204541, 93210], [6371, 136234], [6371, 119629], [6371, 199761], [6371, 110510], [6371, 118768],
        [6371, 93210], [6371, 98036], [6371, 3096], [6371, 168893], [6371, 61100], [6371, 4240], [171628, 93210],
        [16301, 111623], [16301, 57352], [16301, 93210], [113109, 93210], [113109, 110510], [119629, 121447],
        [119629, 3096], [119629, 136234], [119629, 13457], [119629, 199761], [119629, 118768], [119629, 98036],
        [119629, 6371], [119629, 110510], [119629, 93210], [119629, 61100], [57352, 16301], [57352, 93210],
        [57352, 4666], [57352, 32672], [4240, 3096], [4240, 118768], [4240, 61100], [4240, 168893], [4240, 93210],
        [4240, 199761], [4240, 43067], [4240, 110510], [4240, 98036], [4240, 6371], [93117, 151833], [93117, 93210],
        [93210, 126560], [93210, 116027], [93210, 176225], [93210, 121447], [93210, 93117], [93210, 7432],
        [93210, 179213], [93210, 40554], [93210, 6371], [93210, 61100], [93210, 168893], [93210, 3096],
        [93210, 129213], [93210, 119629], [93210, 98036], [93210, 200847], [93210, 103531], [93210, 136234],
        [93210, 118768], [93210, 199761], [93210, 193469], [93210, 43346], [93210, 32672], [93210, 110510],
        [103531, 202317], [103531, 6371], [103531, 32672], [103531, 136234], [103531, 199761], [103531, 98036],
        [103531, 148177], [103531, 93210], [43783, 93210], [43346, 126560], [43346, 93210], [43346, 118768],
        [43346, 32672], [146990, 93210], [95981, 93210], [165493, 204541], [165493, 93210], [95502, 93210],
        [167049, 118768], [167049, 93210], [167049, 136234], [167049, 6371], [167049, 3096], [167049, 59229],
        [167049, 98036], [167049, 61100], [167049, 199761], [167049, 110510], [167049, 119629], [3096, 119629],
        [3096, 93210], [3096, 202317], [3096, 61100], [3096, 118768], [3096, 6371], [3096, 110510], [3096, 98036],
        [3096, 199761], [3096, 35939], [117390, 93210], [173561, 93210], [173561, 140678], [116027, 163653],
        [116027, 93210], [116027, 40554], [31728, 93210], [31728, 74483], [40554, 98036], [40554, 116027],
        [40554, 93210], [45690, 93210], [4666, 57352], [4666, 93210], [13457, 3096], [13457, 93210],
        [13457, 168893], [13457, 199761], [13457, 110510], [13457, 98036], [13457, 119629], [13457, 6371],
        [13457, 118768], [13457, 61100], [76124, 193469], [76124, 93210], [76124, 179213], [164827, 126560],
        [164827, 93210], [39735, 93210], [39735, 176225], [39735, 126560], [166193, 93210], [166193, 6371],
        [177445, 93210], [186319, 193469], [186319, 39735], [186319, 93210], [67339, 93210], [77603, 200847],
        [77603, 118768], [77603, 6371], [77603, 199761], [77603, 98036], [77603, 93210], [128001, 93210],
        [136234, 131765], [136234, 43067], [136234, 118768], [136234, 110510], [136234, 61100], [136234, 119629],
        [136234, 199761], [136234, 6371], [136234, 3096], [136234, 98036], [136234, 103531], [136234, 93210],
        [168893, 93210], [168893, 61100], [168893, 6371], [168893, 98036], [179213, 7432], [179213, 93210],
        [108326, 93210], [88205, 93210], [64649, 179213], [64649, 7432], [64649, 194823], [64649, 93210],
        [106588, 93210], [106588, 6371], [120477, 93210], [120477, 179213], [183849, 93210], [34882, 93210],
        [34882, 35939], [34882, 32672]
    ];

    const withSensitive = [6371,16176,61100,37130,57352,11776,117390,59229,193469,106588,163877,93210,194823204541,111623,64649,109430,43067,118768,131765,166193,16301,67339,136234,176225,96514,31728,165493,121447,129213,183849,34882,167049,77603,100575,110510,40554,113109,3096,13457,58732,32408,198517,74483,103531,39735,119629,202317,177445,178769,200847,188716,163653,56733,191320,43783,98492,98036,148177,32672,4666,156513,43346,168893,74561,186319,45690,126560,4240,113986,35939,76124,176285,199761,186745,140678];

    const cyVertices = vertices
        .map(v => {

            var color = '#ccc';
            if (withSensitive.includes(v)) {
              color = '#ff0000';
            }

            return { data: { id: v, name: v, color: color }};
        });

    const cyEdges = edges
        .map(e => {

            var color = '#ccc';
            if (withSensitive.includes(e[1])) {
              color = '#ff0000';
            }

            return { data: { id: e[0] + '-' + e[1], source: e[0], target: e[1], color: color }};
        });

    cy.elements().remove();
    cy.json({ elements: { nodes: cyVertices, edges: cyEdges }});

    var layout = cy.layout({
        name: 'concentric',
        animate: false,
        directed: true,
        padding: 10,
        equidistant: true,
    });
    layout.run();

    function unlearn() {
        const purchaseModal = new bootstrap.Modal('#purchaseModal', {});
        purchaseModal.show();
    }

    renderPurchases();
    renderRecommendations();
</script>
</body>
</html>
